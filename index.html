<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAT Treasury Monitor</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #0d0d12; --bg-secondary: #13131a; --bg-tertiary: #1a1a24; --bg-card: #16161f;
            --border: #252530; --border-light: #2a2a38;
            --text-primary: #f5f5f7; --text-secondary: #9898a6; --text-muted: #5a5a6e;
            --btc: #f7931a; --eth: #627eea; --sol: #9945ff; --hype: #00d395; --bnb: #f0b90b;
            --green: #22c55e; --red: #ef4444; --blue: #3b82f6; --orange: #f97316;
            --accent: #a78bfa; --accent-dark: #7c3aed;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; }
        .mono { font-family: 'JetBrains Mono', monospace; }

        /* === HEADER === */
        .header { 
            background: var(--bg-secondary); 
            border-bottom: 1px solid var(--border); 
            padding: 0 24px; 
            height: 56px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between;
            position: sticky; 
            top: 0; 
            z-index: 100;
        }
        .header-left { display: flex; align-items: center; gap: 16px; }
        .logo { display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .logo-icon { 
            width: 32px; height: 32px; 
            background: linear-gradient(135deg, var(--accent-dark), var(--accent)); 
            border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 10px; font-weight: 700; color: white;
        }
        .logo-text { font-size: 15px; font-weight: 600; color: var(--text-primary); }
        .logo-divider { width: 1px; height: 24px; background: var(--border); }
        .powered-by { font-size: 11px; color: var(--text-muted); }
        .powered-by a { color: var(--accent); text-decoration: none; }
        .powered-by a:hover { text-decoration: underline; }

        .header-right { display: flex; align-items: center; gap: 12px; }
        .last-updated { font-size: 11px; color: var(--text-muted); }
        .status-badge { 
            display: flex; align-items: center; gap: 6px; 
            padding: 6px 10px; 
            background: rgba(34, 197, 94, 0.1); 
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 6px; 
            font-size: 11px; 
            color: var(--green);
        }
        .status-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--green); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        
        .btn-refresh { 
            display: flex; align-items: center; gap: 6px;
            padding: 8px 14px; 
            background: var(--accent-dark); 
            border: none; 
            border-radius: 6px; 
            color: white; 
            font-size: 12px; 
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-refresh:hover { background: #6d28d9; }

        /* === MAIN CONTENT === */
        .main { padding: 20px 24px; max-width: 1800px; margin: 0 auto; }

        /* === STATS ROW === */
        .stats-row { 
            display: flex; 
            gap: 12px; 
            margin-bottom: 20px; 
            overflow-x: auto;
            padding-bottom: 4px;
        }
        .stat-card { 
            flex: 1; 
            min-width: 160px;
            background: var(--bg-card); 
            border: 1px solid var(--border); 
            border-radius: 10px; 
            padding: 14px 16px;
        }
        .stat-label { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px; }
        .stat-value { font-size: 18px; font-weight: 600; }
        .stat-meta { font-size: 10px; color: var(--text-muted); margin-top: 4px; }
        .stat-card.btc .stat-value { color: var(--btc); }
        .stat-card.eth .stat-value { color: var(--eth); }
        .stat-card.sol .stat-value { color: var(--sol); }
        .stat-card.hype .stat-value { color: var(--hype); }
        .stat-card.bnb .stat-value { color: var(--bnb); }

        /* === FILTER TABS === */
        .toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 12px; }
        .tabs { display: flex; gap: 4px; background: var(--bg-secondary); padding: 4px; border-radius: 8px; border: 1px solid var(--border); }
        .tab { 
            padding: 7px 14px; 
            border: none; 
            border-radius: 6px; 
            background: transparent; 
            color: var(--text-muted); 
            font-size: 12px; 
            font-weight: 500;
            cursor: pointer; 
            transition: all 0.15s;
            font-family: inherit;
        }
        .tab:hover { color: var(--text-secondary); }
        .tab.active { background: var(--accent-dark); color: white; }
        
        .toolbar-right { display: flex; align-items: center; gap: 8px; }
        .company-count { font-size: 12px; color: var(--text-muted); }

        /* === TABLE === */
        .table-container { 
            background: var(--bg-secondary); 
            border: 1px solid var(--border); 
            border-radius: 12px; 
            overflow: hidden;
        }
        .table-scroll { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th { 
            padding: 12px 16px; 
            text-align: left; 
            font-size: 10px; 
            font-weight: 600; 
            color: var(--text-muted); 
            text-transform: uppercase; 
            letter-spacing: 0.5px;
            background: var(--bg-tertiary); 
            border-bottom: 1px solid var(--border);
            white-space: nowrap;
        }
        td { padding: 14px 16px; border-bottom: 1px solid var(--border); }
        tr:last-child td { border-bottom: none; }
        tr:hover { background: rgba(255,255,255,0.02); }
        .right { text-align: right; }
        .center { text-align: center; }

        /* === TABLE CELLS === */
        .company-cell { display: flex; align-items: center; gap: 12px; }
        .ticker-badge { 
            display: inline-flex; align-items: center; justify-content: center;
            min-width: 52px; 
            padding: 5px 8px; 
            border-radius: 6px; 
            font-size: 11px; 
            font-weight: 600;
        }
        .ticker-badge.btc { background: rgba(247,147,26,0.12); color: var(--btc); }
        .ticker-badge.eth { background: rgba(98,126,234,0.12); color: var(--eth); }
        .ticker-badge.sol { background: rgba(153,69,255,0.12); color: var(--sol); }
        .ticker-badge.hype { background: rgba(0,211,149,0.12); color: var(--hype); }
        .ticker-badge.bnb { background: rgba(240,185,11,0.12); color: var(--bnb); }
        
        .company-info { }
        .company-name { font-weight: 500; font-size: 13px; }
        .company-note { font-size: 10px; color: var(--text-muted); margin-top: 2px; max-width: 180px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .holdings { font-weight: 600; font-size: 14px; }
        .token-label { font-size: 11px; color: var(--text-muted); margin-left: 4px; }
        
        .change-positive { color: var(--green); font-size: 12px; }
        .change-negative { color: var(--red); font-size: 12px; }
        .no-change { color: var(--text-muted); font-size: 11px; }

        .date-cell { font-size: 12px; color: var(--text-secondary); }
        .date-cell.fresh { color: var(--green); }

        .alert-badge { 
            display: inline-flex; align-items: center; gap: 4px;
            padding: 4px 8px; 
            background: rgba(249,115,22,0.12); 
            border: 1px solid rgba(249,115,22,0.25);
            border-radius: 4px; 
            font-size: 10px; 
            font-weight: 600; 
            color: var(--orange);
            text-decoration: none;
            animation: blink 1.8s infinite;
        }
        .alert-badge:hover { background: rgba(249,115,22,0.2); }

        .link-cell a { 
            color: var(--accent); 
            text-decoration: none; 
            font-size: 11px;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background 0.15s;
        }
        .link-cell a:hover { background: rgba(167,139,250,0.1); }
        .link-cell .na { color: var(--text-muted); font-size: 10px; }

        /* === FOOTER === */
        .footer { 
            margin-top: 32px; 
            padding: 16px 24px; 
            border-top: 1px solid var(--border); 
            text-align: center; 
            font-size: 11px; 
            color: var(--text-muted);
        }
        .footer a { color: var(--accent); text-decoration: none; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <a href="#" class="logo">
                <div class="logo-icon">DAT</div>
                <span class="logo-text">Treasury Monitor</span>
            </a>
            <div class="logo-divider"></div>
            <div class="powered-by">Powered by <a href="https://www.artemisanalytics.com" target="_blank">Artemis</a></div>
        </div>
        <div class="header-right">
            <span class="last-updated" id="lastUpdated">Updated: â€”</span>
            <div class="status-badge">
                <div class="status-dot"></div>
                <span>Live</span>
            </div>
            <button class="btn-refresh" onclick="location.reload()">
                <span>â†»</span> Refresh
            </button>
        </div>
    </header>

    <main class="main">
        <!-- Stats Row -->
        <div class="stats-row" id="statsRow"></div>

        <!-- Toolbar -->
        <div class="toolbar">
            <div class="tabs" id="tabs"></div>
            <div class="toolbar-right">
                <span class="company-count" id="companyCount">21 companies</span>
            </div>
        </div>

        <!-- Table -->
        <div class="table-container">
            <div class="table-scroll">
                <table>
                    <thead>
                        <tr>
                            <th>Company</th>
                            <th class="right">Holdings</th>
                            <th class="right">Change</th>
                            <th class="center">Updated</th>
                            <th class="center">Alert</th>
                            <th class="center">SEC</th>
                            <th class="center">IR</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </div>
    </main>

    <footer class="footer">
        DAT Treasury Monitor â€¢ <a href="https://www.artemisanalytics.com" target="_blank">Artemis</a> â€¢ Tracking Digital Asset Treasury Companies
    </footer>

    <script>
        // Fallback embedded data (used if data.json fetch fails)
        const FALLBACK_DATA = {
            "lastUpdatedDisplay": "Jan 12, 2026 9:00 PM EST",
            "companies": {
                "BTC": [
                    {"ticker": "MSTR", "name": "Strategy", "notes": "Rebranded from MicroStrategy Feb 2025", "tokens": 687410, "lastUpdate": "2026-01-12", "change": 13627, "cik": "0001050446", "irUrl": "https://www.strategy.com/investor-relations", "alertUrl": "https://www.strategy.com/news", "alertDate": "2026-01-12", "alertNote": "Weekly BTC purchase"},
                    {"ticker": "XXI", "name": "Twenty One Capital", "notes": "Backed by Tether, SoftBank, Cantor", "tokens": 43514, "lastUpdate": "2025-12-09", "change": 0, "cik": "0002070457", "irUrl": "https://xxi.money/", "alertUrl": "https://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&CIK=0002070457&type=S-1", "alertDate": "2026-01-05", "alertNote": "S-1 filing"},
                    {"ticker": "MTPLF", "name": "Metaplanet", "notes": "Japan TSE - No SEC", "tokens": 35102, "lastUpdate": "2025-12-30", "change": 4279, "cik": "", "irUrl": "https://metaplanet.jp/en/shareholders/disclosures"},
                    {"ticker": "ASST", "name": "Strive", "tokens": 7627, "lastUpdate": "2026-01-05", "change": 0, "cik": "0001855631", "irUrl": "https://investors.strive.com/overview/default.aspx"},
                    {"ticker": "NAKA", "name": "Nakamoto Holdings", "notes": "Nasdaq warning", "tokens": 5765, "lastUpdate": "2025-11-19", "change": 0, "cik": "0001946573", "irUrl": "https://nakamoto.com/dashboard"},
                    {"ticker": "ABTC", "name": "American Bitcoin", "notes": "fka Gryphon Digital", "tokens": 5427, "lastUpdate": "2026-01-05", "change": 644, "cik": "0001755953", "irUrl": "https://www.abtc.com/news"}
                ],
                "ETH": [
                    {"ticker": "BMNR", "name": "BitMine Immersion", "notes": "Largest ETH treasury. 3.45% of supply", "tokens": 4167768, "lastUpdate": "2026-01-12", "change": 24266, "cik": "0001829311", "irUrl": "https://www.bitminetech.io/investor-relations", "alertUrl": "https://www.prnewswire.com/news-releases/bitmine-immersion-technologies-bmnr-announces-eth-holdings-302658171.html", "alertDate": "2026-01-12", "alertNote": "Weekly update. Annual mtg Jan 15"},
                    {"ticker": "SBET", "name": "SharpLink Gaming", "notes": "Has live ETH dashboard", "tokens": 864840, "lastUpdate": "2026-01-08", "change": 0, "cik": "0001811115", "irUrl": "https://investors.sharplink.com/"},
                    {"ticker": "ETHM", "name": "Ether Machine", "tokens": 495362, "lastUpdate": "2025-09-02", "change": 0, "cik": "0002028699", "irUrl": "https://ethermachine.com/investors"},
                    {"ticker": "BTBT", "name": "Bit Digital", "tokens": 155227, "lastUpdate": "2026-01-07", "change": 0, "cik": "0001710350", "irUrl": "https://bit-digital.com/investors/"},
                    {"ticker": "BTCS", "name": "BTCS", "notes": "Record $16M revenue 2025", "tokens": 70500, "lastUpdate": "2026-01-07", "change": 178, "cik": "0001521184", "irUrl": "https://www.btcs.com/news-media/", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/07/3214520/0/en/BTCS-Record-Revenue.html", "alertDate": "2026-01-07", "alertNote": "2025 shareholder letter"},
                    {"ticker": "FGNX", "name": "FG Nexus", "tokens": 40088, "lastUpdate": "2025-12-17", "change": 0, "cik": "0001591890", "irUrl": "https://fgnexus.io/news/"},
                    {"ticker": "ETHZ", "name": "Ethzilla", "notes": "fka 180 Life Sciences", "tokens": 8478, "lastUpdate": "2025-12-01", "change": 0, "cik": "0001690080", "irUrl": "https://www.ethzilla.com/investors"}
                ],
                "SOL": [
                    {"ticker": "FWDI", "name": "Forward Industries", "notes": "Largest SOL. Ticker was FORD", "tokens": 6921342, "lastUpdate": "2025-12-02", "change": 0, "cik": "0000038264", "irUrl": "https://www.forwardindustries.com/media"},
                    {"ticker": "HSDT", "name": "Solana Company", "notes": "fka Helius Medical", "tokens": 2300000, "lastUpdate": "2025-10-29", "change": 0, "cik": "0001610853", "irUrl": "https://www.solanacompany.co/"},
                    {"ticker": "DFDV", "name": "DeFi Development", "notes": "dfdvSOL liquid staking", "tokens": 2221329, "lastUpdate": "2026-01-05", "change": 25403, "cik": "0001805526", "irUrl": "https://defidevcorp.com/investor", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/07/3214530/0/en/DeFi-Development-Year-Review.html", "alertDate": "2026-01-08", "alertNote": "2025 Year in Review"},
                    {"ticker": "UPXI", "name": "Upexi", "notes": "High-yield strategy 2026", "tokens": 2174583, "lastUpdate": "2026-01-05", "change": 67594, "cik": "0001839175", "irUrl": "https://ir.upexi.com/", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/07/3214451/0/en/Upexi-High-Return-Strategy.html", "alertDate": "2026-01-07", "alertNote": "High-yield strategy"},
                    {"ticker": "STSS", "name": "Sharps Technology", "notes": "Coinbase validator partner", "tokens": 2000000, "lastUpdate": "2026-01-12", "change": 0, "cik": "0001737995", "irUrl": "https://www.sharpstechnology.com/investors/news", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/12/3216808/0/en/Sharps-Coinbase-Validator.html", "alertDate": "2026-01-12", "alertNote": "Coinbase validator launch"}
                ],
                "HYPE": [
                    {"ticker": "PURR", "name": "Hyperliquid Strategies", "notes": "fka Sonnet Bio", "tokens": 12600000, "lastUpdate": "2025-07-14", "change": 0, "cik": "0001106838", "irUrl": "https://www.sonnetbio.com/investors/news-events"},
                    {"ticker": "HYPD", "name": "Hyperion DeFi", "notes": "fka Eyenovia. Felix HIP-3", "tokens": 1427178, "lastUpdate": "2026-01-12", "change": 0, "cik": "0001682639", "irUrl": "https://ir.hyperiondefi.com/", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/12/3216808/0/en/Hyperion-DeFi-Shareholder-Letter.html", "alertDate": "2026-01-12", "alertNote": "CEO shareholder letter"}
                ],
                "BNB": [
                    {"ticker": "BNC", "name": "CEA Industries", "tokens": 515054, "lastUpdate": "2025-12-01", "change": 0, "cik": "0001482541", "irUrl": "https://ceaindustries.com/investors.html"}
                ]
            }
        };

        let DATA = null;
        const TOKENS = ['BTC', 'ETH', 'SOL', 'HYPE', 'BNB'];
        const TOKEN_LABELS = { BTC: 'Bitcoin', ETH: 'Ethereum', SOL: 'Solana', HYPE: 'Hyperliquid', BNB: 'BNB' };
        let currentFilter = 'ALL';

        const formatNum = n => n ? n.toLocaleString() : 'â€”';
        const formatCompact = n => {
            if (!n) return 'â€”';
            if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
            if (n >= 1e3) return (n / 1e3).toFixed(1) + 'K';
            return n.toString();
        };
        const isRecent = (d, days = 14) => d && (Date.now() - new Date(d)) < days * 86400000;
        const getSecUrl = cik => cik ? `https://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&CIK=${cik}&type=8-K&dateb=&owner=include&count=40` : '';

        function getCompanies() {
            if (currentFilter === 'ALL') {
                return TOKENS.flatMap(token => 
                    (DATA.companies[token] || []).map(c => ({ ...c, token }))
                ).sort((a, b) => (b.tokens || 0) - (a.tokens || 0));
            }
            return (DATA.companies[currentFilter] || [])
                .map(c => ({ ...c, token: currentFilter }))
                .sort((a, b) => (b.tokens || 0) - (a.tokens || 0));
        }

        function renderStats() {
            document.getElementById('statsRow').innerHTML = TOKENS.map(token => {
                const list = DATA.companies[token] || [];
                const total = list.reduce((s, c) => s + (c.tokens || 0), 0);
                return `
                    <div class="stat-card ${token.toLowerCase()}">
                        <div class="stat-label">${TOKEN_LABELS[token]}</div>
                        <div class="stat-value mono">${formatCompact(total)}</div>
                        <div class="stat-meta">${list.length} ${list.length === 1 ? 'company' : 'companies'}</div>
                    </div>
                `;
            }).join('');
        }

        function renderTabs() {
            const tabs = ['ALL', ...TOKENS];
            document.getElementById('tabs').innerHTML = tabs.map(t => 
                `<button class="tab ${currentFilter === t ? 'active' : ''}" onclick="setFilter('${t}')">${t}</button>`
            ).join('');
        }

        function renderTable() {
            const companies = getCompanies();
            document.getElementById('companyCount').textContent = `${companies.length} companies`;
            
            document.getElementById('tableBody').innerHTML = companies.map(c => `
                <tr>
                    <td>
                        <div class="company-cell">
                            <span class="ticker-badge mono ${c.token.toLowerCase()}">${c.ticker}</span>
                            <div class="company-info">
                                <div class="company-name">${c.name}</div>
                                ${c.notes ? `<div class="company-note" title="${c.notes}">${c.notes}</div>` : ''}
                            </div>
                        </div>
                    </td>
                    <td class="right">
                        <span class="holdings mono">${formatNum(c.tokens)}</span>
                        <span class="token-label">${c.token}</span>
                    </td>
                    <td class="right">
                        ${c.change > 0 ? `<span class="change-positive mono">+${formatNum(c.change)}</span>` :
                          c.change < 0 ? `<span class="change-negative mono">${formatNum(c.change)}</span>` :
                          '<span class="no-change">â€”</span>'}
                    </td>
                    <td class="center date-cell mono ${isRecent(c.lastUpdate, 7) ? 'fresh' : ''}">${c.lastUpdate || 'â€”'}</td>
                    <td class="center">
                        ${c.alertUrl && isRecent(c.alertDate) ? 
                            `<a href="${c.alertUrl}" target="_blank" class="alert-badge" title="${c.alertNote || ''}">ðŸ”” NEW</a>` : 
                            '<span class="no-change">â€”</span>'}
                    </td>
                    <td class="center link-cell">
                        ${c.cik ? `<a href="${getSecUrl(c.cik)}" target="_blank">8-K â†’</a>` : '<span class="na">N/A</span>'}
                    </td>
                    <td class="center link-cell">
                        <a href="${c.irUrl}" target="_blank">IR â†’</a>
                    </td>
                </tr>
            `).join('');
        }

        function setFilter(f) {
            currentFilter = f;
            renderTabs();
            renderTable();
        }

        function render() {
            document.getElementById('lastUpdated').textContent = `Updated: ${DATA.lastUpdatedDisplay || 'Unknown'}`;
            renderStats();
            renderTabs();
            renderTable();
        }

        // Load data from data.json, fallback to embedded
        async function init() {
            try {
                const response = await fetch('./data.json?' + Date.now()); // Cache bust
                if (response.ok) {
                    DATA = await response.json();
                    console.log('Loaded data from data.json');
                } else {
                    throw new Error('Failed to fetch data.json');
                }
            } catch (e) {
                console.log('Using fallback data:', e.message);
                DATA = FALLBACK_DATA;
            }
            render();
        }

        init();
    </script>
</body>
</html>
