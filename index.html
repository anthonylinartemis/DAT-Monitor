<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAT Treasury Monitor</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #0a0a0f; --bg-secondary: #12121a; --bg-tertiary: #1a1a24;
            --border: #2a2a35; --text-primary: #f0f0f5; --text-secondary: #a0a0b0; --text-muted: #606070;
            --btc: #f7931a; --eth: #627eea; --sol: #9945ff; --hype: #00d395; --bnb: #f0b90b;
            --green: #22c55e; --red: #ef4444; --blue: #3b82f6; --orange: #f97316;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .container { max-width: 1600px; margin: 0 auto; padding: 0 20px; }
        
        .header { background: var(--bg-secondary); border-bottom: 1px solid var(--border); padding: 16px 0; position: sticky; top: 0; z-index: 100; }
        .header-inner { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
        .logo { display: flex; align-items: center; gap: 12px; }
        .logo-icon { width: 40px; height: 40px; border-radius: 10px; background: linear-gradient(135deg, var(--btc), #ea580c); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 12px; color: white; }
        .logo h1 { font-size: 18px; font-weight: 600; }
        .logo p { font-size: 11px; color: var(--text-muted); }
        .header-info { display: flex; align-items: center; gap: 16px; }
        .status { display: flex; align-items: center; gap: 8px; padding: 8px 12px; background: var(--bg-tertiary); border-radius: 8px; font-size: 12px; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--green); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        .btn { padding: 10px 16px; border: none; border-radius: 8px; font-family: inherit; font-size: 13px; font-weight: 500; cursor: pointer; display: inline-flex; align-items: center; gap: 6px; }
        .btn-primary { background: var(--blue); color: white; }
        .btn-primary:hover { background: #2563eb; }
        
        .stats { display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; margin: 24px 0; }
        @media (max-width: 900px) { .stats { grid-template-columns: repeat(2, 1fr); } }
        .stat { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; padding: 16px; }
        .stat-header { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px; color: var(--text-muted); }
        .stat-value { font-size: 20px; font-weight: 600; }
        .stat.btc .stat-value { color: var(--btc); }
        .stat.eth .stat-value { color: var(--eth); }
        .stat.sol .stat-value { color: var(--sol); }
        .stat.hype .stat-value { color: var(--hype); }
        .stat.bnb .stat-value { color: var(--bnb); }
        
        .controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 12px; }
        .tabs { display: flex; gap: 6px; flex-wrap: wrap; }
        .tab { padding: 8px 14px; border: 1px solid var(--border); border-radius: 6px; background: transparent; color: var(--text-muted); font-size: 13px; cursor: pointer; font-family: inherit; }
        .tab:hover { border-color: var(--text-muted); }
        .tab.active { color: var(--text-primary); background: rgba(255,255,255,0.05); border-color: var(--text-primary); }
        
        .table-wrap { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
        .table-scroll { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th { padding: 12px; text-align: left; font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; background: var(--bg-tertiary); border-bottom: 1px solid var(--border); white-space: nowrap; }
        td { padding: 12px; border-bottom: 1px solid var(--border); vertical-align: middle; }
        tr:hover { background: rgba(255,255,255,0.02); }
        .right { text-align: right; }
        .center { text-align: center; }
        
        .ticker-cell { display: flex; align-items: center; gap: 10px; }
        .ticker { display: inline-block; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600; }
        .ticker.btc { background: rgba(247,147,26,0.15); color: var(--btc); }
        .ticker.eth { background: rgba(98,126,234,0.15); color: var(--eth); }
        .ticker.sol { background: rgba(153,69,255,0.15); color: var(--sol); }
        .ticker.hype { background: rgba(0,211,149,0.15); color: var(--hype); }
        .ticker.bnb { background: rgba(240,185,11,0.15); color: var(--bnb); }
        .company-name { font-weight: 500; }
        .company-notes { font-size: 10px; color: var(--text-muted); margin-top: 2px; max-width: 200px; }
        .holdings { font-weight: 600; }
        .change-pos { color: var(--green); background: rgba(34,197,94,0.15); padding: 2px 6px; border-radius: 4px; font-size: 12px; }
        .change-neg { color: var(--red); background: rgba(239,68,68,0.15); padding: 2px 6px; border-radius: 4px; font-size: 12px; }
        .date { font-size: 12px; color: var(--text-secondary); }
        .date.recent { color: var(--green); }
        .link { color: var(--blue); text-decoration: none; font-size: 11px; }
        .link:hover { text-decoration: underline; }
        
        .alert-new { display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; background: rgba(249,115,22,0.15); color: var(--orange); border: 1px solid rgba(249,115,22,0.3); border-radius: 4px; font-size: 10px; font-weight: 600; text-decoration: none; animation: blink 1.5s infinite; }
        .alert-new:hover { background: rgba(249,115,22,0.25); }
        .no-alert { color: var(--text-muted); font-size: 11px; }
        
        .summary { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; padding: 16px; margin-bottom: 20px; }
        .summary-title { font-size: 14px; font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .summary-item { display: flex; align-items: center; gap: 12px; padding: 8px 0; border-bottom: 1px solid var(--border); }
        .summary-item:last-child { border-bottom: none; }
        .summary-badge { padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600; }
        .summary-text { flex: 1; }
        .summary-headline { font-weight: 500; font-size: 13px; }
        .summary-detail { font-size: 11px; color: var(--text-muted); margin-top: 2px; }
        
        .footer { border-top: 1px solid var(--border); padding: 20px 0; margin-top: 40px; text-align: center; color: var(--text-muted); font-size: 12px; }
        .loading { display: flex; align-items: center; justify-content: center; height: 100vh; color: var(--text-muted); font-size: 14px; }
        .error { color: var(--red); }
    </style>
</head>
<body>
    <div id="app" class="loading">Loading DAT Monitor...</div>

    <script>
        // Data will be embedded or fetched
        const EMBEDDED_DATA = {
            "lastUpdated": "2026-01-12T21:00:00-05:00",
            "lastUpdatedDisplay": "Jan 12, 2026 9:00 PM EST",
            "recentChanges": [
                {"ticker": "BMNR", "token": "ETH", "date": "2026-01-12", "tokens": 4167768, "change": 24266, "summary": "4.168M ETH (+24,266 this week). Annual meeting Jan 15 at Wynn Vegas"},
                {"ticker": "HYPD", "token": "HYPE", "date": "2026-01-12", "tokens": 1427178, "change": 0, "summary": "CEO shareholder letter - 2026 strategy"},
                {"ticker": "STSS", "token": "SOL", "date": "2026-01-12", "tokens": 2000000, "change": 0, "summary": "Coinbase validator launch - delegating 2M SOL"},
                {"ticker": "MSTR", "token": "BTC", "date": "2026-01-12", "tokens": 687410, "change": 13627, "summary": "Acquired 13,627 BTC for ~$1.25B at avg $91,519/BTC"},
                {"ticker": "BTCS", "token": "ETH", "date": "2026-01-07", "tokens": 70500, "change": 178, "summary": "70,500 ETH. Record $16M revenue 2025 (+290% YoY)"}
            ],
            "companies": {
                "BTC": [
                    {"ticker": "MSTR", "name": "Strategy", "notes": "Rebranded from MicroStrategy Feb 2025", "tokens": 687410, "lastUpdate": "2026-01-12", "change": 13627, "cik": "0001050446", "irUrl": "https://www.strategy.com/investor-relations", "alertUrl": "https://www.strategy.com/news", "alertDate": "2026-01-12", "alertNote": "Weekly BTC purchase"},
                    {"ticker": "XXI", "name": "Twenty One Capital", "notes": "Backed by Tether, SoftBank, Cantor", "tokens": 43514, "lastUpdate": "2025-12-09", "change": 0, "cik": "0002070457", "irUrl": "https://xxi.money/", "alertUrl": "https://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&CIK=0002070457&type=S-1", "alertDate": "2026-01-05", "alertNote": "S-1 filing"},
                    {"ticker": "MTPLF", "name": "Metaplanet", "notes": "Japan TSE - No SEC", "tokens": 35102, "lastUpdate": "2025-12-30", "change": 4279, "cik": "", "irUrl": "https://metaplanet.jp/en/shareholders/disclosures"},
                    {"ticker": "ASST", "name": "Strive", "tokens": 7627, "lastUpdate": "2026-01-05", "change": 0, "cik": "0001855631", "irUrl": "https://investors.strive.com/overview/default.aspx"},
                    {"ticker": "NAKA", "name": "Nakamoto Holdings", "notes": "Nasdaq warning", "tokens": 5765, "lastUpdate": "2025-11-19", "change": 0, "cik": "0001946573", "irUrl": "https://nakamoto.com/dashboard"},
                    {"ticker": "ABTC", "name": "American Bitcoin", "notes": "fka Gryphon Digital", "tokens": 5427, "lastUpdate": "2026-01-05", "change": 644, "cik": "0001755953", "irUrl": "https://www.abtc.com/news"}
                ],
                "ETH": [
                    {"ticker": "BMNR", "name": "BitMine Immersion", "notes": "Largest ETH treasury. 3.45% of supply", "tokens": 4167768, "lastUpdate": "2026-01-12", "change": 24266, "cik": "0001829311", "irUrl": "https://www.bitminetech.io/investor-relations", "alertUrl": "https://www.prnewswire.com/news-releases/bitmine-immersion-technologies-bmnr-announces-eth-holdings-302658171.html", "alertDate": "2026-01-12", "alertNote": "Weekly update. Annual mtg Jan 15"},
                    {"ticker": "SBET", "name": "SharpLink Gaming", "notes": "Has live ETH dashboard", "tokens": 864840, "lastUpdate": "2026-01-08", "change": 0, "cik": "0001811115", "irUrl": "https://investors.sharplink.com/"},
                    {"ticker": "ETHM", "name": "Ether Machine", "tokens": 495362, "lastUpdate": "2025-09-02", "change": 0, "cik": "0002028699", "irUrl": "https://ethermachine.com/investors"},
                    {"ticker": "BTBT", "name": "Bit Digital", "tokens": 155227, "lastUpdate": "2026-01-07", "change": 0, "cik": "0001710350", "irUrl": "https://bit-digital.com/investors/"},
                    {"ticker": "BTCS", "name": "BTCS", "notes": "Record $16M revenue 2025", "tokens": 70500, "lastUpdate": "2026-01-07", "change": 178, "cik": "0001521184", "irUrl": "https://www.btcs.com/news-media/", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/07/3214520/0/en/BTCS-Record-Revenue.html", "alertDate": "2026-01-07", "alertNote": "2025 shareholder letter"},
                    {"ticker": "FGNX", "name": "FG Nexus", "tokens": 40088, "lastUpdate": "2025-12-17", "change": 0, "cik": "0001591890", "irUrl": "https://fgnexus.io/news/"},
                    {"ticker": "ETHZ", "name": "Ethzilla", "notes": "fka 180 Life Sciences", "tokens": 8478, "lastUpdate": "2025-12-01", "change": 0, "cik": "0001690080", "irUrl": "https://www.ethzilla.com/investors"}
                ],
                "SOL": [
                    {"ticker": "FWDI", "name": "Forward Industries", "notes": "Largest SOL. Ticker was FORD", "tokens": 6921342, "lastUpdate": "2025-12-02", "change": 0, "cik": "0000038264", "irUrl": "https://www.forwardindustries.com/media"},
                    {"ticker": "HSDT", "name": "Solana Company", "notes": "fka Helius Medical", "tokens": 2300000, "lastUpdate": "2025-10-29", "change": 0, "cik": "0001610853", "irUrl": "https://www.solanacompany.co/"},
                    {"ticker": "DFDV", "name": "DeFi Development", "notes": "dfdvSOL liquid staking", "tokens": 2221329, "lastUpdate": "2026-01-05", "change": 25403, "cik": "0001805526", "irUrl": "https://defidevcorp.com/investor", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/07/3214530/0/en/DeFi-Development-Year-Review.html", "alertDate": "2026-01-08", "alertNote": "2025 Year in Review"},
                    {"ticker": "UPXI", "name": "Upexi", "notes": "High-yield strategy 2026", "tokens": 2174583, "lastUpdate": "2026-01-05", "change": 67594, "cik": "0001839175", "irUrl": "https://ir.upexi.com/", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/07/3214451/0/en/Upexi-High-Return-Strategy.html", "alertDate": "2026-01-07", "alertNote": "High-yield strategy"},
                    {"ticker": "STSS", "name": "Sharps Technology", "notes": "Coinbase validator partner", "tokens": 2000000, "lastUpdate": "2026-01-12", "change": 0, "cik": "0001737995", "irUrl": "https://www.sharpstechnology.com/investors/news", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/12/3216808/0/en/Sharps-Coinbase-Validator.html", "alertDate": "2026-01-12", "alertNote": "Coinbase validator launch"}
                ],
                "HYPE": [
                    {"ticker": "PURR", "name": "Hyperliquid Strategies", "notes": "fka Sonnet Bio", "tokens": 12600000, "lastUpdate": "2025-07-14", "change": 0, "cik": "0001106838", "irUrl": "https://www.sonnetbio.com/investors/news-events"},
                    {"ticker": "HYPD", "name": "Hyperion DeFi", "notes": "fka Eyenovia. Felix HIP-3", "tokens": 1427178, "lastUpdate": "2026-01-12", "change": 0, "cik": "0001682639", "irUrl": "https://ir.hyperiondefi.com/", "alertUrl": "https://www.globenewswire.com/news-release/2026/01/12/3216808/0/en/Hyperion-DeFi-Shareholder-Letter.html", "alertDate": "2026-01-12", "alertNote": "CEO shareholder letter"}
                ],
                "BNB": [
                    {"ticker": "BNC", "name": "CEA Industries", "tokens": 515054, "lastUpdate": "2025-12-01", "change": 0, "cik": "0001482541", "irUrl": "https://ceaindustries.com/investors.html"}
                ]
            },
            "totals": {"BTC": 784845, "ETH": 5802263, "SOL": 15617254, "HYPE": 14027178, "BNB": 515054}
        };

        const TOKEN_INFO = {
            BTC: { label: 'Bitcoin', class: 'btc' },
            ETH: { label: 'Ethereum', class: 'eth' },
            SOL: { label: 'Solana', class: 'sol' },
            HYPE: { label: 'Hyperliquid', class: 'hype' },
            BNB: { label: 'BNB', class: 'bnb' }
        };

        let currentFilter = 'ALL';
        let data = EMBEDDED_DATA;

        function formatNum(n) {
            return n ? Number(n).toLocaleString() : '‚Äî';
        }

        function formatCompact(n) {
            if (!n) return '‚Äî';
            if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
            if (n >= 1e3) return (n / 1e3).toFixed(1) + 'K';
            return n.toString();
        }

        function isRecent(dateStr, days = 14) {
            if (!dateStr) return false;
            const diff = new Date() - new Date(dateStr);
            return diff < days * 86400000;
        }

        function getSecUrl(cik) {
            return cik ? `https://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&CIK=${cik}&type=8-K&dateb=&owner=include&count=40` : '';
        }

        function getCompanies() {
            if (!data || !data.companies) return [];
            if (currentFilter === 'ALL') {
                const all = [];
                for (const [token, list] of Object.entries(data.companies)) {
                    for (const c of list) {
                        all.push({ ...c, token });
                    }
                }
                return all.sort((a, b) => (b.tokens || 0) - (a.tokens || 0));
            }
            return (data.companies[currentFilter] || [])
                .map(c => ({ ...c, token: currentFilter }))
                .sort((a, b) => (b.tokens || 0) - (a.tokens || 0));
        }

        function render() {
            const companies = getCompanies();
            
            document.getElementById('app').innerHTML = `
                <header class="header">
                    <div class="container">
                        <div class="header-inner">
                            <div class="logo">
                                <div class="logo-icon">DAT</div>
                                <div>
                                    <h1>DAT Treasury Monitor</h1>
                                    <p>SEC 8-K & IR Aggregator</p>
                                </div>
                            </div>
                            <div class="header-info">
                                <div class="status">
                                    <div class="status-dot"></div>
                                    <span>Live</span>
                                </div>
                                <div style="font-size: 12px; color: var(--text-secondary)">
                                    Updated: ${data.lastUpdatedDisplay}
                                </div>
                                <button class="btn btn-primary" onclick="location.reload()">‚Üª Refresh</button>
                            </div>
                        </div>
                    </div>
                </header>

                <main class="container" style="padding: 24px 20px 60px">
                    <!-- Summary Panel -->
                    <div class="summary">
                        <div class="summary-title">
                            <span style="color: var(--green)">‚óè</span> Recent Updates
                        </div>
                        ${data.recentChanges.slice(0, 5).map(u => `
                            <div class="summary-item">
                                <span class="summary-badge ticker ${u.token.toLowerCase()}">${u.ticker}</span>
                                <div class="summary-text">
                                    <div class="summary-headline">
                                        <span class="mono">${formatNum(u.tokens)}</span> ${u.token}
                                        ${u.change !== 0 ? `<span style="color: ${u.change > 0 ? 'var(--green)' : 'var(--red)'}; margin-left: 8px">(${u.change > 0 ? '+' : ''}${formatNum(u.change)})</span>` : ''}
                                    </div>
                                    <div class="summary-detail">${u.summary}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats">
                        ${Object.entries(TOKEN_INFO).map(([token, info]) => {
                            const list = data.companies[token] || [];
                            const total = list.reduce((s, c) => s + (c.tokens || 0), 0);
                            return `
                                <div class="stat ${info.class}">
                                    <div class="stat-header">
                                        <span>${info.label}</span>
                                        <span>${list.length} DATs</span>
                                    </div>
                                    <div class="stat-value mono">${formatCompact(total)}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>

                    <!-- Filter Tabs -->
                    <div class="controls">
                        <div class="tabs">
                            ${['ALL', 'BTC', 'ETH', 'SOL', 'HYPE', 'BNB'].map(t => `
                                <button class="tab ${currentFilter === t ? 'active' : ''}" onclick="setFilter('${t}')">${t}</button>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Table -->
                    <div class="table-wrap">
                        <div class="table-scroll">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Company</th>
                                        <th class="right">Holdings</th>
                                        <th class="right">Change</th>
                                        <th class="center">Updated</th>
                                        <th class="center">NEW</th>
                                        <th class="center">SEC</th>
                                        <th class="center">IR</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${companies.map(c => `
                                        <tr>
                                            <td>
                                                <div class="ticker-cell">
                                                    <span class="ticker mono ${c.token.toLowerCase()}">${c.ticker}</span>
                                                    <div>
                                                        <div class="company-name">${c.name}</div>
                                                        ${c.notes ? `<div class="company-notes">${c.notes}</div>` : ''}
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="right">
                                                <span class="holdings mono">${formatNum(c.tokens)} ${c.token}</span>
                                            </td>
                                            <td class="right">
                                                ${c.change > 0 ? `<span class="change-pos mono">+${formatNum(c.change)}</span>` :
                                                  c.change < 0 ? `<span class="change-neg mono">${formatNum(c.change)}</span>` :
                                                  '<span class="no-alert">‚Äî</span>'}
                                            </td>
                                            <td class="center date mono ${isRecent(c.lastUpdate, 7) ? 'recent' : ''}">${c.lastUpdate || '‚Äî'}</td>
                                            <td class="center">
                                                ${c.alertUrl && isRecent(c.alertDate) ? 
                                                    `<a href="${c.alertUrl}" target="_blank" rel="noopener" class="alert-new" title="${c.alertNote || 'New update'}">üîî NEW</a>` : 
                                                    '<span class="no-alert">‚Äî</span>'}
                                            </td>
                                            <td class="center">
                                                ${c.cik ? `<a href="${getSecUrl(c.cik)}" target="_blank" class="link">8-K‚Üí</a>` : '<span class="no-alert">N/A</span>'}
                                            </td>
                                            <td class="center">
                                                <a href="${c.irUrl}" target="_blank" class="link">IR‚Üí</a>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </main>

                <footer class="footer">
                    <div class="container">DAT Treasury Monitor ‚Ä¢ Artemis Analytics ‚Ä¢ 21 Companies Tracked</div>
                </footer>
            `;
        }

        function setFilter(f) {
            currentFilter = f;
            render();
        }

        // Try to fetch external data.json, fall back to embedded
        fetch('./data.json')
            .then(r => r.ok ? r.json() : Promise.reject('No external data'))
            .then(d => { data = d; render(); })
            .catch(() => render());
    </script>
</body>
</html>
